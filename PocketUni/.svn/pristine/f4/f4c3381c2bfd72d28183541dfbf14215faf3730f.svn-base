package com.xyhui.utils;

import android.app.Activity;
import android.content.Intent;

import com.xyhui.activity.LoadingActivity;
import com.xyhui.activity.MainActivity;
import com.xyhui.activity.PuApp;
import com.xyhui.types.Token;

public class AccountUtils {
	static PuApp mainApp = PuApp.get();

	public static void logout(Activity activity) {
		mainApp.setPreference(Preferences.LOCAL.NOTLOGGED, true);
		mainApp.setPreference(Preferences.LOCAL.TOKEN, null);
		mainApp.setPreference(Preferences.LOCAL.SECRET, null);
		mainApp.setPreference(Preferences.LOCAL.UID, null);
		mainApp.setPreference(Preferences.LOCAL.CITYID, null);
		mainApp.setPreference(Preferences.LOCAL.SCHOOLID, null);
		mainApp.setPreference(Preferences.LOCAL.SCHOOLLIST, null);
		mainApp.setPreference(Preferences.LOCAL.CITYLIST, null);
		mainApp.setPreference(Preferences.LOCAL.MOBILE, null);
		mainApp.setPreference(Preferences.LOCAL.ANNOUNCETIME, 0);

		// 进入登陆界面
		Intent intent = new Intent();
		intent.setClass(activity, LoadingActivity.class);
		activity.startActivity(intent);

		activity.finish();
	}

	public static void login(Activity activity, Token token) {
		mainApp.setPreference(Preferences.LOCAL.NOTLOGGED, false);
		mainApp.setPreference(Preferences.LOCAL.UID, token.uid);
		mainApp.setPreference(Preferences.LOCAL.TOKEN, token.oauth_token);
		mainApp.setPreference(Preferences.LOCAL.SECRET, token.oauth_token_secret);

		// 进入主界面
		Intent intent = new Intent();
		intent.setClass(activity, MainActivity.class);
		activity.startActivity(intent);

		activity.finish();
	}
}
